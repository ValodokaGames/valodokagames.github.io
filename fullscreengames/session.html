<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valodoka Game Session</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }
        
        /* Glass HUD Cluster */
        .game-header {
            position: absolute; display: flex; align-items: center; gap: 12px;
            background: rgba(15, 15, 20, 0.85); padding: 8px 15px;
            border-radius: 30px; border: 1.5px solid rgba(142, 68, 173, 0.5);
            z-index: 4000; backdrop-filter: blur(10px);
            transition: all 0.4s;
        }

        /* SPLIT LOADING OVERLAY */
        #loading-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #0d1117; display: flex; z-index: 3000; transition: opacity 0.8s ease;
            overflow: hidden;
        }

        /* Left Side (Stationary) */
        .loader-left {
            width: 40%; height: 100%; display: flex; flex-direction: column;
            justify-content: center; align-items: center; background: #0d1117;
            border-right: 2px solid rgba(142, 68, 173, 0.3); z-index: 3100;
        }

        /* Right Side (The Scrolling Viewport) */
        .loader-right {
            width: 60%; height: 100%; position: relative;
            background: #0a0a0a; display: flex; justify-content: center; gap: 20px;
            transform: rotate(-5deg) scale(1.1); /* This creates the "sideways" tilt */
            overflow: hidden;
        }

        /* The Scrolling Columns */
        .scroll-col {
            display: flex; flex-direction: column; gap: 20px;
            animation: scrollUp 20s linear infinite;
        }

        /* Offset the second column for a random look */
        .col-slow { animation-duration: 30s; }

        @keyframes scrollUp {
            0% { transform: translateY(0); }
            100% { transform: translateY(-50%); } /* Scrolls through half (the duplicate set) */
        }

        .scroll-card {
            width: 150px; aspect-ratio: 1/1; background: #1c2128;
            border-radius: 15px; border: 2px solid rgba(142, 68, 173, 0.2);
            overflow: hidden; flex-shrink: 0;
        }
        .scroll-card img { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; }

        /* SZ Spinner */
        .spinner-ring {
            width: 70px; height: 70px; border: 6px solid rgba(142, 68, 173, 0.1);
            border-top: 6px solid var(--brand-purple); border-radius: 50%;
            animation: spin 1s cubic-bezier(0.5, 0, 0.5, 1) infinite; margin-bottom: 20px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        #loader-text { font-family: 'Fredoka One', sans-serif; color: white; letter-spacing: 2px; }

        .iframe-container { width: 100vw; height: 100vh; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <div id="loading-overlay">
        <div class="loader-left">
            <div class="spinner-ring"></div>
            <p id="loader-text">VALODOKA IS LOADING...</p>
        </div>
        
        <div class="loader-right">
            <div class="scroll-col" id="col1"></div>
            <div class="scroll-col col-slow" id="col2"></div>
        </div>
    </div>

    <div class="iframe-container">
        <iframe id="game-iframe"></iframe>
    </div>

    <script>
        // List of your games (Use the same ones as your homepage)
        const gameList = [
            { img: "../assets/minecraft.png" },
            { img: "../assets/bitlife.png" },
            { img: "../assets/pvz.png" },
            { img: "../assets/slope.png" },
            { img: "../assets/retro-bowl.png" },
            { img: "../assets/fnaf.png" }
        ];

        function createScroll() {
            const c1 = document.getElementById('col1');
            const c2 = document.getElementById('col2');
            
            // We duplicate the list so the scroll is seamless
            const fullList = [...gameList, ...gameList]; 
            
            const html = fullList.map(game => `
                <div class="scroll-card">
                    <img src="${game.img}">
                </div>
            `).join('');

            c1.innerHTML = html;
            c2.innerHTML = html;
        }

        window.addEventListener('load', function() {
            createScroll();
            
            const urlParams = new URLSearchParams(window.location.search);
            const game = urlParams.get('game');
            const iframe = document.getElementById('game-iframe');
            const overlay = document.getElementById('loading-overlay');

            if (game) {
                iframe.src = "../gameiframes/" + game + ".html";
                setTimeout(() => {
                    overlay.style.opacity = '0';
                    setTimeout(() => overlay.style.display = 'none', 800);
                }, 5000); // 5 seconds to show off the cool animation!
            }
        });
    </script>
</body>
</html>
